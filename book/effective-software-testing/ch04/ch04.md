# CHAPTER 4. 계약 설계(Designing contracts)

## 4.4 계약에 의한 설계(design-by-contract)가 테스트와 어떤 관련이 있는가?
- 필자는 계약에 의한 설계를 테스트 관행보다는 `설계 기법(Design)`으로 바라본다.

## 4.5 현업에서의 계약에 의한 설계
### 4.5.2 입력 유효성 검사인가, 계약인가? 아니면 둘 다 인가?
- 유효성 검사와 계약은 서로 다르다.
- 예시. 만약 사용자가 품목 추가 페이지에 있는 수량 필드에 문자열을 입력했다면, '수량은 숫자값이어야 합니다.'와 같이 사용자로부터 오는 데이터가 올바른지 확인하고 그렇지 않은 경우 에러 메세지를 반환한다.
- 때문에 둘 다 이루어져야 한다. 문제는 어떻게 반복을 피할 수 있을까 하는 것이다.
- 필자는 입력 유효성 검사를 이미 수행했다면 핵심 클래스의 생성자에서 사전 조건으로 그것을 다시 확인하지 않는다.
- 반면에 계약은 매우 중요하고 절대 깨져서는 안된다. 필자는 약간의 중복과 입력 유효성 및 계약 검사를 수행할 때, 부가적으로 컴퓨팅 성능을 사용하는 것을 꺼리지 않는다.
- [계약에 의한 설계 vs 유효성 검사 차이점](https://stackoverflow.com/questions/5049163/when-should-i-use-apache-commons-validate-istrue-and-when-should-i-just-use-th/5452329#5452329)

### 4.5.3. 단언과 예외: 둘 중 하나를 선택해야 한다면?
- [John Regehr on "Use of Assertions"](https://blog.regehr.org/archives/1091)